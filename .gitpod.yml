image: gitpod/workspace-full:latest

tasks:
  - name: Flutter Setup
    init: |
      echo 'Setting up Flutter...'
      wget https://storage.googleapis.com/flutter_infra_release/releases/stable/linux/flutter_linux_3.19.5-stable.tar.xz
      tar xf flutter_linux_3.19.5-stable.tar.xz -C /workspace
      rm flutter_linux_3.19.5-stable.tar.xz
      echo 'export PATH="/workspace/flutter/bin:$PATH"' >> ~/.bashrc
      source ~/.bashrc
      echo 'Done setting up Flutter.'
    command: |
      echo 'Starting Flutter doctor...'
      flutter doctor

ports:
  - port: 8080
    onOpen: open-preview

vscode:
  extensions:
    - Dart-Code.flutter
    - Dart-Code.dart-code
